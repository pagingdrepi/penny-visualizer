<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.pink.min.css"
    >
    <title>Scale Visualizer</title>
    <style>
        .coin { 
            display: none;
            height: 25px;
            width: 25px;
        }

        .shown {
            display: block;
        }

        .output .coin { display: block; }
        .output { display: flex; flex-wrap: wrap;}

    </style>
</head>
<body>
    <img class='coin' id='penny' href='https://studentden.com/wp-content/uploads/2019/09/Penny-PNG-Clipart.png'>
    <img class='coin' id='dime' href='https://upload.wikimedia.org/wikipedia/commons/3/3c/Dime_Obverse_13.png'>
    <img class='coin' id='quarter' href='https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/2006_Quarter_Proof.png/609px-2006_Quarter_Proof.png'>
    <img class='coin' id='nickel' href='https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/US_Nickel_2013_Rev.png/768px-US_Nickel_2013_Rev.png'>
    <h3>
        I want to visualize <input class='vis' placeholder='10.00' aria-invalid='false' value='10.00'> US dollars in <select id="currency">
            <option value="penny">pennies</option>
            <option value="dime">dimes</option>
            <option value="quarter">quarters</option>
            <option value="nickel">nickels</option>
        </select>
    </h3>

    <div class="output"></div>

    <script>
        let selected_coin = 'penny';
        let value = 10.00;

        const coinValues = {
            penny: 0.01,
            dime: 0.10,
            nickel: 0.05,
            quarter: 0.25
        };

        function tick() {
            const output = document.querySelector('.output');
            output.innerHTML = '';

            const coinValue = coinValues[selected_coin];
            const coinCount = Math.floor(value / coinValue);

            for (let i = 0; i < coinCount; i++) {
                const img = document.createElement('img');
                img.src = document.querySelector(`#${selected_coin}`).getAttribute('href');
                img.alt = selected_coin;
                img.className = 'coin shown';
                output.appendChild(img);
            }

            console.log(`Selected coin: ${selected_coin}`);
            console.log(`Value: ${value}`);
            console.log(`Number of coins: ${coinCount}`);
        }

        document.querySelector('#currency').addEventListener('input', function () {
            selected_coin = this.value;
            value = Number(document.querySelector('.vis').value);
            tick();
        });

        document.querySelector('.vis').addEventListener('input', function () {
            if (!isNaN(this.value) && isFinite(Number(this.value)) && Number(this.value) > 0) {
                this.setAttribute('aria-invalid', 'false');
                selected_coin = document.querySelector('#currency').value;
                value = Number(this.value);
                tick();
            } else {
                this.setAttribute('aria-invalid', 'true');
            }
        });

        tick();
    </script>
</body>
</html>
